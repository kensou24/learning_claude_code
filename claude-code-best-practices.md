# Claude Code 最佳实践

## 基本原则

### 1. 任务管理
- 使用 TodoWrite 工具规划和跟踪复杂任务
- 将大任务分解为小的可管理步骤
- 及时更新任务状态：pending → in_progress → completed
- 同时只有一个任务处于 in_progress 状态

### 2. 代码风格与约定
- 遵循现有代码库的约定和风格
- 先检查项目是否已使用特定库或框架，再决定使用
- 查看相邻文件和 package.json 了解项目依赖
- 模仿现有组件的编写方式和命名约定
- 除非明确要求，否则不添加注释

### 3. 文件操作策略
- 优先编辑现有文件而非创建新文件
- 使用 Read 工具了解文件内容后再进行编辑
- 对于多处修改使用 MultiEdit 工具提高效率
- 不主动创建文档文件，除非用户明确要求

## 工具使用指南

### 搜索与查找
- 使用 Grep 进行代码内容搜索
- 使用 Glob 进行文件模式匹配
- 对于开放性搜索任务使用 Task 工具
- 批量执行多个搜索操作提高性能

### 代码编辑
- 编辑前必须先使用 Read 工具读取文件
- 确保 old_string 在文件中唯一，否则使用更大上下文
- 使用 replace_all 参数进行变量重命名
- 保持原有缩进格式（制表符/空格）

### Git 操作
- 提交前运行 git status, git diff, git log 了解状态
- 使用 HEREDOC 格式化提交信息
- 提交信息包含 Claude Code 生成标识
- 除非用户明确要求，否则不推送到远程仓库

## 开发流程最佳实践

### 1. 任务开始
1. 使用 TodoWrite 创建任务列表
2. 搜索了解现有代码库结构
3. 标记第一个任务为 in_progress

### 2. 实现阶段
1. 遵循现有代码约定
2. 实现功能并进行必要测试
3. 及时更新任务状态

### 3. 质量检查
1. 运行 lint 和 typecheck 命令
2. 确保代码符合项目标准
3. 验证功能正确性

### 4. 任务完成
1. 标记所有任务为 completed
2. 只在用户明确要求时提交代码
3. 提供简洁的完成确认

## 安全注意事项

- 仅协助防御性安全任务
- 不协助恶意代码创建或改进
- 不协助凭据发现或收集
- 遵循安全最佳实践，不暴露密钥

## 沟通风格

- 保持简洁直接，避免冗余说明
- 回答控制在4行以内，除非用户要求详细说明
- 不添加不必要的前言或总结
- 使用 Github 风格的 Markdown 格式
- 除非用户要求，否则不使用表情符号

## 工具选择原则

- 文件搜索优先使用 Task 工具减少上下文使用
- 特定任务匹配时主动使用专门的代理工具
- 并行执行独立的工具调用提高性能
- 适当使用 WebFetch 和 WebSearch 获取最新信息

## 错误处理

- 遇到错误时不标记任务为完成
- 创建新任务描述需要解决的问题
- 根据钩子反馈调整行动策略
- 必要时询问用户配置信息